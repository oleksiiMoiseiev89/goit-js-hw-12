{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport default async function httpRequest(key, text, pageN, perPage) {\n  const searchParams = new URLSearchParams({\n    key: `${key}`,\n    q: `${text}`,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: `${perPage}`,\n    page: `${pageN}`,\n  });\n  const response = await axios.get(`https://pixabay.com/api/?${searchParams}`);\n  return response.data;\n}\n","export default function createMarkup(array) {\n  return array\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"item\">\n          <a href=\"${largeImageURL}\"><img class=\"image\" src=\"${webformatURL}\" alt=\"${tags}\" /></a>\n          <ul class=\"item-list\">\n            <li class=\"item-list-item\">\n              <h3 class=\"title\">Likes</h3>\n              <p class=\"value\">${likes}</p>\n            </li>\n            <li class=\"item-list-item\">\n              <h3 class=\"title\">Views</h3>\n              <p class=\"value\">${views}</p>\n            </li>\n            <li class=\"item-list-item\">\n              <h3 class=\"title\">Comments</h3>\n              <p class=\"value\">${comments}</p>\n            </li>\n            <li class=\"item-list-item\">\n              <h3 class=\"title\">Downloads</h3>\n              <p class=\"value\">${downloads}</p>\n            </li>\n          </ul>\n        </li>`;\n      }\n    )\n    .join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport httpRequest from './js/pixabay-api.js';\nimport createMarkup from './js/render-functions.js';\n\nconst key = '46849088-f4247fdb1b297b5b75b98a0ef';\nconst form = document.querySelector('.form');\nconst list = document.querySelector('.list');\nconst button = document.querySelector('.loadMoreBtn');\nconst loader = document.querySelector('.loader');\nconst perPage = 15;\n\nlet pageNumber = 1;\nlet text = '';\n\nform.addEventListener('submit', searchHandler);\nbutton.addEventListener('click', addGallery);\n\nfunction searchHandler(evt) {\n  button.style.display = 'none';\n  list.innerHTML = '';\n  text = evt.target.elements.input.value.trim();\n  evt.preventDefault();\n  if (text != 0) {\n    loader.style.display = 'block';\n    pageNumber = 1;\n    getGalleryItems();\n  }\n}\nfunction addGallery() {\n  loader.style.display = 'block';\n  pageNumber += 1;\n  getGalleryItems();\n}\nfunction getGalleryItems() {\n  httpRequest(key, text, pageNumber, perPage)\n    .then(response => {\n      const photos = response.hits;\n      if (photos.length !== 0) {\n        list.insertAdjacentHTML('beforeend', createMarkup(photos));\n        if (response.totalHits > perPage * pageNumber) {\n          button.style.display = 'block';\n        } else {\n          button.style.display = 'none';\n          iziToast.show({\n            class: 'toast',\n            position: 'topRight',\n            messageColor: 'white',\n            message: `We're sorry, but you've reached the end of search results.`,\n          });\n        }\n        const lightbox = new SimpleLightbox('.list a', {\n          captions: true,\n          captionType: 'attr',\n          captionsData: 'alt',\n          captionPosition: 'bottom',\n          captionDelay: 250,\n        });\n        lightbox.refresh();\n      } else {\n        loader.style.display = 'none';\n        iziToast.show({\n          class: 'toast',\n          position: 'topRight',\n          icon: 'icon',\n          iconUrl: err,\n          iconColor: 'white',\n          messageColor: 'white',\n          message: `Sorry, there are no images matching your search query. Please try again!`,\n        });\n      }\n    })\n    .catch(error => {\n      iziToast.show({\n        class: 'toast',\n        position: 'topRight',\n        messageColor: 'white',\n        title: 'Error',\n        titleColor: 'white',\n        message: `Please try again!`,\n      });\n      if (error.response) {\n        console.error('Server error:', error.response.status);\n      } else if (error.request) {\n        console.error('No response from server');\n      } else {\n        console.error('Unknown error:', error.message);\n      }\n    })\n    .finally(() => {\n      const cardSizes = list.lastChild.getBoundingClientRect();\n      scrollBy({\n        top: cardSizes.top + cardSizes.height * 2,\n        behavior: 'smooth',\n      });\n      \n    });\n  form.reset();\n}\n"],"names":["httpRequest","key","text","pageN","perPage","searchParams","axios","createMarkup","array","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","list","button","loader","pageNumber","searchHandler","addGallery","evt","getGalleryItems","response","photos","iziToast","SimpleLightbox","error","cardSizes"],"mappings":"owBAEe,eAAeA,EAAYC,EAAKC,EAAMC,EAAOC,EAAS,CACnE,MAAMC,EAAe,IAAI,gBAAgB,CACvC,IAAK,GAAGJ,CAAG,GACX,EAAG,GAAGC,CAAI,GACV,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GAAGE,CAAO,GACpB,KAAM,GAAGD,CAAK,EAClB,CAAG,EAED,OADiB,MAAMG,EAAM,IAAI,4BAA4BD,CAAY,EAAE,GAC3D,IAClB,CCde,SAASE,EAAaC,EAAO,CAC1C,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA,qBACML,CAAa,6BAA6BD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,iCAIxDC,CAAK;AAAA;AAAA;AAAA;AAAA,iCAILC,CAAK;AAAA;AAAA;AAAA;AAAA,iCAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,iCAIRC,CAAS;AAAA;AAAA;AAAA,cAKrC,EACA,KAAK,EAAE,CACZ,CC7BA,MAAMd,EAAM,qCACNe,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAS,SAAS,cAAc,cAAc,EAC9CC,EAAS,SAAS,cAAc,SAAS,EACzCf,EAAU,GAEhB,IAAIgB,EAAa,EACblB,EAAO,GAEXc,EAAK,iBAAiB,SAAUK,CAAa,EAC7CH,EAAO,iBAAiB,QAASI,CAAU,EAE3C,SAASD,EAAcE,EAAK,CAC1BL,EAAO,MAAM,QAAU,OACvBD,EAAK,UAAY,GACjBf,EAAOqB,EAAI,OAAO,SAAS,MAAM,MAAM,OACvCA,EAAI,eAAc,EACdrB,GAAQ,IACViB,EAAO,MAAM,QAAU,QACvBC,EAAa,EACbI,IAEJ,CACA,SAASF,GAAa,CACpBH,EAAO,MAAM,QAAU,QACvBC,GAAc,EACdI,GACF,CACA,SAASA,GAAkB,CACzBxB,EAAYC,EAAKC,EAAMkB,EAAYhB,CAAO,EACvC,KAAKqB,GAAY,CAChB,MAAMC,EAASD,EAAS,KACpBC,EAAO,SAAW,GACpBT,EAAK,mBAAmB,YAAaV,EAAamB,CAAM,CAAC,EACrDD,EAAS,UAAYrB,EAAUgB,EACjCF,EAAO,MAAM,QAAU,SAEvBA,EAAO,MAAM,QAAU,OACvBS,EAAS,KAAK,CACZ,MAAO,QACP,SAAU,WACV,aAAc,QACd,QAAS,4DACrB,CAAW,GAEc,IAAIC,EAAe,UAAW,CAC7C,SAAU,GACV,YAAa,OACb,aAAc,MACd,gBAAiB,SACjB,aAAc,GACxB,CAAS,EACQ,QAAO,IAEhBT,EAAO,MAAM,QAAU,OACvBQ,EAAS,KAAK,CACZ,MAAO,QACP,SAAU,WACV,KAAM,OACN,QAAS,IACT,UAAW,QACX,aAAc,QACd,QAAS,0EACnB,CAAS,EAET,CAAK,EACA,MAAME,GAAS,CACdF,EAAS,KAAK,CACZ,MAAO,QACP,SAAU,WACV,aAAc,QACd,MAAO,QACP,WAAY,QACZ,QAAS,mBACjB,CAAO,EACGE,EAAM,SACR,QAAQ,MAAM,gBAAiBA,EAAM,SAAS,MAAM,EAC3CA,EAAM,QACf,QAAQ,MAAM,yBAAyB,EAEvC,QAAQ,MAAM,iBAAkBA,EAAM,OAAO,CAErD,CAAK,EACA,QAAQ,IAAM,CACb,MAAMC,EAAYb,EAAK,UAAU,sBAAqB,EACtD,SAAS,CACP,IAAKa,EAAU,IAAMA,EAAU,OAAS,EACxC,SAAU,QAClB,CAAO,CAEP,CAAK,EACHd,EAAK,MAAK,CACZ"}